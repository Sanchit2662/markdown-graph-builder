<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GraphNote</title>
  <link rel="stylesheet" href="style.css">

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>

<body>

<header class="top-bar">
  <a class="app-title">GraphNote</a>

  <div class="right-top">
    <button class="top-btn" id="uploadBtn">Upload .md</button>
    <button class="top-btn" id="exportBtn">Export</button>
    <button class="top-btn" id="importBtn">Import</button>
    <input type="file" id="importInput" accept=".json" hidden>

    <button class="top-btn reset-btn" id="resetBtn">Reset</button>
  </div>
</header>

<div class="container">

  <!-- LEFT SIDEBAR -->
  <aside class="sidebar-left">

    <div class="search-wrapper">
      <input id="searchNotes" placeholder="Search notes… (Ctrl+F)">
    </div>

    <!-- Group folders + new note together -->
    <div class="folders-notes-wrapper">

      <div class="folder-section">
        <div class="folder-header">
          <span class="folder-title">Folders</span>
          <button id="newFolderBtn" class="folder-add-btn">+ Folder</button>
        </div>

        <ul id="foldersList" class="folders-list"></ul>
      </div>

      <button class="new-note-btn">+ New Note</button>

    </div>

    <p class="empty-text">No notes in this space.</p>

    <ul id="notesList" class="notes-list"></ul>

  </aside>

  <div class="dragbar" id="drag-left"></div>

  <!-- CENTER PANEL -->
  <main class="center-panel">
    <textarea id="editor" class="editor-area" placeholder="Select or upload a note…"></textarea>

    <div class="dragbar-v" id="drag-editor-preview"></div>

    <div id="preview" class="preview-pane">
      <div class="preview-placeholder">Rendered preview will appear here.</div>
    </div>
  </main>

  <div class="dragbar" id="drag-right"></div>

  <!-- RIGHT SIDEBAR -->
  <aside class="sidebar-right">
    <h3 class="graph-title">Knowledge Graph</h3>
    <p class="graph-sub">Click nodes to open notes</p>

    <div class="graph-placeholder">Write notes to see connections</div>

    <div id="graphNetwork" class="graph-network"></div>
    <div id="graphTooltip" class="graph-tooltip"></div>
  </aside>

</div>

<!-- UPLOAD MODAL -->
<div id="uploadModal" class="modal">
  <div class="modal-content">
    <h2 class="modal-title">Upload Markdown File</h2>

    <div id="dropArea" class="drop-area">
      <p>Drag & drop .md file</p>
      <span class="small">or click to browse</span>
      <input type="file" id="fileInput" accept=".md">
    </div>

    <div class="divider">OR</div>

    <button id="driveBtn" class="drive-btn">Add From Google Drive</button>
    <button id="closeModal" class="close-btn">Cancel</button>
  </div>
</div>

<script src="script.js"></script>

<script>
  function onGapiLoad() { if (window.gapiLoaded) gapiLoaded(); }
  function onGisLoad() { if (window.gisLoaded) gisLoaded(); }
</script>

<script src="https://apis.google.com/js/api.js?onload=onGapiLoad"></script>
<script src="https://accounts.google.com/gsi/client" onload="onGisLoad()"></script>
<script src="https://apis.google.com/js/picker.js"></script>

</body>
</html>
